# webrtc-screen-share

WebVRで画面共有

## Getting Started

SSL証明書を作成するときに指定したドメインとアクセス先のドメインを一致させる必要がある。

`SCREEN_SHARE_HOST` に LAN 内の自身のPCのIPアドレスを指定してください。

```
$ export SCREEN_SHARE_HOST=$(hostname)
$ docker-compose up -d
```

TOPページにアクセス `https://<ホスト名>:3001`

### iphoneに証明書をインストール

1. TOPページを表示
2. 「ルート証明書をダウンロード」をクリック
3. 設定からプロファイルをインストール
4. 設定 > 一般 > 情報 > 証明書信頼設定 で「ルート証明書を全面的に信頼する」をONにする

## モーションセンサーのアクセス許可

iOS12.2 よりモーションセンサーへのアクセスがデフォルトで禁止されている。

ユーザが明示的にアクセスを許可する設定をする必要がある。

設定 > Safari > プライバシーとセキュリティ > モーションと画面の向きのアクセスを許可 を ON にする

## 画面共有の手順

1. PC側で https://<自身のIPアドレス>:8000 にアクセス
2. 「画面を共有」をクリック
3. iPhone側で https://<PCのIPアドレス>:8000 にアクセス
4. 「画面共有を受け取る」をクリック
5. PC側で「connect」をクリックして、共有する画面を選択

## フルスクリーンで表示

[iPhoneではブラウザ上でWebページをフルスクリーン表示できない](https://github.com/aframevr/aframe/issues/3508)ので、回避策としてホーム画面からページを表示するようにしています。

1. safariでページを開く
2. ホーム画面に追加
3. ホーム画面のアイコンからリモート共有を受け取るページを表示
